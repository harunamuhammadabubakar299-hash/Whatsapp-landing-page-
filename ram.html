<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìñ Ramadan Quiz Challenge</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #0c3b2e 0%, #1a5c48 100%);
            color: white;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 500px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 2px solid #2ecc71;
            padding-bottom: 20px;
        }
        
        .header h1 {
            font-size: 28px;
            margin-bottom: 10px;
            color: #2ecc71;
            text-shadow: 0 2px 5px rgba(0,0,0,0.3);
        }
        
        .header .subtitle {
            font-size: 16px;
            opacity: 0.9;
        }
        
        .islamic-decoration {
            font-size: 24px;
            margin: 10px 0;
            color: #f1c40f;
        }
        
        .card {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .question-box {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .question-text {
            font-size: 18px;
            line-height: 1.5;
            margin-bottom: 20px;
            font-weight: 500;
        }
        
        .category-tag {
            display: inline-block;
            background: #e74c3c;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 14px;
            margin-bottom: 15px;
            font-weight: bold;
        }
        
        .options {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 25px;
        }
        
        .option {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 16px;
        }
        
        .option:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: #2ecc71;
        }
        
        .option.selected {
            background: rgba(46, 204, 113, 0.3);
            border-color: #2ecc71;
        }
        
        .button {
            background: linear-gradient(to right, #2ecc71, #27ae60);
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 10px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s ease;
            margin-top: 10px;
        }
        
        .button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        
        .button-secondary {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid #2ecc71;
        }
        
        .explanation-box {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
            display: none;
            border-left: 4px solid #f1c40f;
        }
        
        .explanation-title {
            color: #f1c40f;
            margin-bottom: 10px;
            font-weight: bold;
        }
        
        .score-board {
            display: flex;
            justify-content: space-between;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 20px;
        }
        
        .score-item {
            text-align: center;
        }
        
        .score-value {
            font-size: 24px;
            font-weight: bold;
            color: #2ecc71;
        }
        
        .score-label {
            font-size: 14px;
            opacity: 0.8;
        }
        
        .admin-panel {
            background: rgba(0, 0, 0, 0.5);
            border-radius: 12px;
            padding: 20px;
            margin-top: 30px;
            border: 2px dashed #e74c3c;
        }
        
        .admin-title {
            color: #e74c3c;
            margin-bottom: 15px;
            text-align: center;
        }
        
        textarea, input {
            width: 100%;
            padding: 12px;
            border-radius: 8px;
            border: 1px solid rgba(255,255,255,0.3);
            background: rgba(0,0,0,0.3);
            color: white;
            margin-bottom: 10px;
            font-size: 16px;
        }
        
        .tab-container {
            display: flex;
            margin-bottom: 20px;
            background: rgba(0,0,0,0.2);
            border-radius: 10px;
            overflow: hidden;
        }
        
        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .tab.active {
            background: #2ecc71;
            font-weight: bold;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .share-box {
            text-align: center;
            margin-top: 20px;
            padding: 15px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
        }
        
        .share-link {
            background: rgba(255,255,255,0.2);
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
            word-break: break-all;
            font-size: 14px;
        }
        
        .whatsapp-btn {
            background: #25D366;
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            text-decoration: none;
            font-weight: bold;
            margin-top: 10px;
        }
        
        @media (max-width: 480px) {
            .container {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 24px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Islamic Decoration -->
        <div class="islamic-decoration" style="text-align: center;">
            Ô∑Ω
        </div>
        
        <div class="header">
            <h1>üìñ Ramadan Quiz Challenge</h1>
            <div class="subtitle">Test your knowledge in Quran, Hadith, Tajwid & Islamic Studies</div>
        </div>
        
        <!-- Tabs -->
        <div class="tab-container">
            <div class="tab active" onclick="switchTab('quiz')">üß† Daily Quiz</div>
            <div class="tab" onclick="switchTab('score')">üèÜ Leaderboard</div>
            <div class="tab" onclick="switchTab('admin')">‚öôÔ∏è Admin</div>
        </div>
        
        <!-- QUIZ TAB -->
        <div id="quiz-tab" class="tab-content active">
            <div class="score-board">
                <div class="score-item">
                    <div class="score-value" id="current-score">0</div>
                    <div class="score-label">Your Score</div>
                </div>
                <div class="score-item">
                    <div class="score-value" id="question-number">1/30</div>
                    <div class="score-label">Question</div>
                </div>
                <div class="score-item">
                    <div class="score-value" id="correct-count">0</div>
                    <div class="score-label">Correct</div>
                </div>
            </div>
            
            <div class="card">
                <div class="category-tag" id="category">Hadith</div>
                <div class="question-box">
                    <div class="question-text" id="question">
                        Loading question...
                    </div>
                    
                    <div class="options" id="options-container">
                        <!-- Options will be loaded here -->
                    </div>
                    
                    <button class="button" onclick="submitAnswer()" id="submit-btn">Submit Answer</button>
                    <button class="button button-secondary" onclick="nextQuestion()" id="next-btn" style="display:none;">Next Question ‚Üí</button>
                </div>
                
                <div class="explanation-box" id="explanation-box">
                    <div class="explanation-title">üìö Explanation & Reference</div>
                    <div id="explanation-text"></div>
                    <div id="reference-text" style="margin-top:10px; font-style:italic;"></div>
                </div>
            </div>
        </div>
        
        <!-- SCORE TAB -->
        <div id="score-tab" class="tab-content">
            <div class="card">
                <h2 style="text-align:center; margin-bottom:20px;">üèÜ Leaderboard</h2>
                <div id="leaderboard">
                    <!-- Leaderboard will be loaded here -->
                </div>
                <button class="button" onclick="resetScores()" style="margin-top:20px;">Reset Scores</button>
            </div>
        </div>
        
        <!-- ADMIN TAB -->
        <div id="admin-tab" class="tab-content">
            <div class="admin-panel">
                <div class="admin-title">‚öôÔ∏è Admin Control Panel</div>
                
                <h3>Add New Question</h3>
                <input type="text" id="new-category" placeholder="Category (e.g., Hadith, Quran, Tajwid)">
                <textarea id="new-question" placeholder="Enter question text..." rows="3"></textarea>
                <input type="text" id="new-optionA" placeholder="Option A">
                <input type="text" id="new-optionB" placeholder="Option B">
                <input type="text" id="new-optionC" placeholder="Option C">
                <input type="text" id="new-answer" placeholder="Correct Answer (A, B, or C)">
                <textarea id="new-explanation" placeholder="Explanation with reference..." rows="2"></textarea>
                <button class="button" onclick="addQuestion()">Add Question</button>
                
                <h3 style="margin-top:30px;">Share Quiz</h3>
                <div class="share-box">
                    <p>Share this link in WhatsApp group:</p>
                    <div class="share-link" id="share-link">Loading...</div>
                    <a href="#" class="whatsapp-btn" id="whatsapp-share">
                        üì± Share on WhatsApp
                    </a>
                </div>
                
                <h3 style="margin-top:30px;">All Questions (Total: <span id="question-count">0</span>)</h3>
                <div id="question-list">
                    <!-- Questions will be listed here -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // Initial Questions Database
        let questions = [
            {
                id: 1,
                category: "Hadith",
                question: "The Prophet (Ô∑∫) said: 'Whoever fasts Ramadan with faith and seeking reward...'",
                options: ["A: Will be forgiven his past sins", "B: Will enter Paradise", "C: Will have his dua accepted"],
                answer: "A",
                explanation: "This hadith emphasizes the forgiveness of sins through sincere fasting.",
                reference: "Sahih Bukhari 38, Sahih Muslim 760"
            },
            {
                id: 2,
                category: "Quran",
                question: "In Surah Al-Baqarah (2:183), who is fasting prescribed for?",
                options: ["A: Muslims only", "B: Those before you", "C: Those who believe"],
                answer: "B",
                explanation: "Allah says fasting was prescribed for those before us, showing it's an ancient worship.",
                reference: "Quran 2:183"
            },
            {
                id: 3,
                category: "Tajwid",
                question: "What is the rule when ŸÜŸàŸÜ ÿ≥ÿßŸÉŸÜÿ© meets the letter ÿ±?",
                options: ["A: Idgham", "B: Ikhfa", "C: Izhar"],
                answer: "C",
                explanation: "ŸÜŸàŸÜ ÿ≥ÿßŸÉŸÜÿ© followed by ÿ± requires Izhar (clear pronunciation without ghunnah).",
                reference: "Tajwid Rule: Izhar Halqi"
            }
        ];

        // User scores storage
        let scores = {
            currentScore: 0,
            correctAnswers: 0,
            totalQuestions: 0,
            leaderboard: []
        };

        let currentQuestionIndex = 0;
        let selectedOption = null;

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            loadScores();
            displayQuestion();
            updateShareLink();
            updateQuestionList();
            
            // Load sample participants for demo
            if(scores.leaderboard.length === 0) {
                scores.leaderboard = [
                    {name: "Ahmed", score: 25},
                    {name: "Fatima", score: 30},
                    {name: "Yusuf", score: 15},
                    {name: "Aisha", score: 20}
                ];
                saveScores();
                updateLeaderboard();
            }
        });

        function switchTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById(tabName + '-tab').classList.add('active');
            document.querySelectorAll('.tab')[tabName === 'quiz' ? 0 : tabName === 'score' ? 1 : 2].classList.add('active');
            
            if(tabName === 'score') {
                updateLeaderboard();
            }
        }

        function displayQuestion() {
            if(currentQuestionIndex >= questions.length) {
                document.getElementById('question').innerHTML = 
                    "<div style='text-align:center; padding:30px;'>üéâ Quiz Complete!<br>Check leaderboard for results.</div>";
                document.getElementById('options-container').innerHTML = "";
                document.getElementById('submit-btn').style.display = 'none';
                return;
            }

            const q = questions[currentQuestionIndex];
            
            document.getElementById('category').textContent = q.category;
            document.getElementById('question').textContent = q.question;
            document.getElementById('question-number').textContent = 
                `${currentQuestionIndex + 1}/${questions.length}`;
            
            // Display options
            let optionsHtml = '';
            q.options.forEach(option => {
                optionsHtml += `
                    <div class="option" onclick="selectOption('${option.charAt(0)}')" id="option-${option.charAt(0)}">
                        ${option}
                    </div>
                `;
            });
            document.getElementById('options-container').innerHTML = optionsHtml;
            
            // Reset UI
            document.getElementById('explanation-box').style.display = 'none';
            document.getElementById('next-btn').style.display = 'none';
            document.getElementById('submit-btn').style.display = 'block';
            selectedOption = null;
        }

        function selectOption(option) {
            // Remove previous selection
            document.querySelectorAll('.option').forEach(opt => {
                opt.classList.remove('selected');
            });
            
            // Highlight selected option
            document.getElementById('option-' + option).classList.add('selected');
            selectedOption = option;
        }

        function submitAnswer() {
            if(!selectedOption) {
                alert("Please select an answer first!");
                return;
            }

            const q = questions[currentQuestionIndex];
            const isCorrect = selectedOption === q.answer;
            
            // Update scores
            if(isCorrect) {
                scores.currentScore += 10;
                scores.correctAnswers++;
                scores.totalQuestions++;
            } else {
                scores.totalQuestions++;
            }
            
            // Show explanation
            document.getElementById('explanation-text').textContent = q.explanation;
            document.getElementById('reference-text').textContent = "Reference: " + q.reference;
            document.getElementById('explanation-box').style.display = 'block';
            
            // Update UI
            document.getElementById('submit-btn').style.display = 'none';
            document.getElementById('next-btn').style.display = 'block';
            document.getElementById('current-score').textContent = scores.currentScore;
            document.getElementById('correct-count').textContent = scores.correctAnswers;
            
            // Save scores
            saveScores();
        }

        function nextQuestion() {
            currentQuestionIndex++;
            displayQuestion();
        }

        function addQuestion() {
            const category = document.getElementById('new-category').value;
            const question = document.getElementById('new-question').value;
            const optionA = document.getElementById('new-optionA').value;
            const optionB = document.getElementById('new-optionB').value;
            const optionC = document.getElementById('new-optionC').value;
            const answer = document.getElementById('new-answer').value.toUpperCase();
            const explanation = document.getElementById('new-explanation').value;
            
            if(!category || !question || !optionA || !optionB || !optionC || !answer || !explanation) {
                alert("Please fill all fields!");
                return;
            }
            
            if(!['A','B','C'].includes(answer)) {
                alert("Answer must be A, B, or C!");
                return;
            }
            
            const newQuestion = {
                id: questions.length + 1,
                category: category,
                question: question,
                options: [`A: ${optionA}`, `B: ${optionB}`, `C: ${optionC}`],
                answer: answer,
                explanation: explanation,
                reference: "Added by Admin"
            };
            
            questions.push(newQuestion);
            saveQuestions();
            updateQuestionList();
            
            // Clear form
            document.getElementById('new-category').value = '';
            document.getElementById('new-question').value = '';
            document.getElementById('new-optionA').value = '';
            document.getElementById('new-optionB').value = '';
            document.getElementById('new-optionC').value = '';
            document.getElementById('new-answer').value = '';
            document.getElementById('new-explanation').value = '';
            
            alert("Question added successfully!");
        }

        function saveQuestions() {
            localStorage.setItem('ramadanQuestions', JSON.stringify(questions));
            updateQuestionCount();
        }

        function saveScores() {
            localStorage.setItem('ramadanScores', JSON.stringify(scores));
        }

        function loadScores() {
            const savedQuestions = localStorage.getItem('ramadanQuestions');
            const savedScores = localStorage.getItem('ramadanScores');
            
            if(savedQuestions) {
                questions = JSON.parse(savedQuestions);
                updateQuestionCount();
            }
            
            if(savedScores) {
                scores = JSON.parse(savedScores);
                document.getElementById('current-score').textContent = scores.currentScore;
                document.getElementById('correct-count').textContent = scores.correctAnswers;
            }
        }

        function updateQuestionCount() {
            document.getElementById('question-count').textContent = questions.length;
        }

        function updateQuestionList() {
            const listContainer = document.getElementById('question-list');
            let html = '<div style="max-height:300px; overflow-y:auto;">';
            
            questions.forEach((q, index) => {
                html += `
                    <div style="background:rgba(255,255,255,0.05); padding:10px; margin:5px 0; border-radius:8px;">
                        <strong>Q${index+1}:</strong> ${q.question.substring(0, 50)}...
                        <br><small>Category: ${q.category} | Answer: ${q.answer}</small>
                    </div>
                `;
            });
            
            html += '</div>';
            listContainer.innerHTML = html;
            updateQuestionCount();
        }

        function updateLeaderboard() {
            // Sort leaderboard by score
            scores.leaderboard.sort((a, b) => b.score - a.score);
            
            let html = '<div style="background:rgba(0,0,0,0.3); border-radius:10px; padding:15px;">';
            
            scores.leaderboard.forEach((user, index) => {
                const medal = index === 0 ? "ü•á" : index === 1 ? "ü•à" : index === 2 ? "ü•â" : `${index+1}.`;
                html += `
                    <div style="display:flex; justify-content:space-between; padding:10px; border-bottom:1px solid rgba(255,255,255,0.1);">
                        <div>${medal} ${user.name}</div>
                        <div style="color:#2ecc71; font-weight:bold;">${user.score} pts</div>
                    </div>
                `;
            });
            
            html += '</div>';
            document.getElementById('leaderboard').innerHTML = html;
        }

        function addParticipant() {
            const name = prompt("Enter participant name:");
            if(name && !scores.leaderboard.find(p => p.name === name)) {
                scores.leaderboard.push({name: name, score: 0});
                saveScores();
                updateLeaderboard();
            }
        }

        function resetScores() {
            if(confirm("Reset all scores and leaderboard?")) {
                scores = {
                    currentScore: 0,
                    correctAnswers: 0,
                    totalQuestions: 0,
                    leaderboard: []
                };
                saveScores();
                currentQuestionIndex = 0;
                displayQuestion();
                updateLeaderboard();
                document.getElementById('current-score').textContent = '0';
                document.getElementById('correct-count').textContent = '0';
            }
        }

        function updateShareLink() {
            // Create a shareable link
            const baseUrl = window.location.href.split('?')[0];
            const shareUrl = baseUrl;
            document.getElementById('share-link').textContent = shareUrl;
            
            // Update WhatsApp share button
            const whatsappBtn = document.getElementById('whatsapp-share');
            const message = encodeURIComponent(
                "üìñ Join our Ramadan Quiz Challenge!\n\n" +
                "Test your knowledge in Quran, Hadith & Tajwid daily.\n\n" +
                "Click to join: " + shareUrl +
                "\n\nMay Allah accept our fasting! ÿ¢ŸÖŸäŸÜ"
            );
            whatsappBtn.href = `https://wa.me/?text=${message}`;
        }

        // Export/Import functionality
        function exportQuestions() {
            const dataStr = JSON.stringify(questions, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            const exportFileDefaultName = 'ramadan_questions.json';
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
        }

        function importQuestions() {
            alert("To import questions: Go to Admin tab, use 'Add New Question' or replace localStorage with new questions.");
        }
    </script>
</body>
</html>
